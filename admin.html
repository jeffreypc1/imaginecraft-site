<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - ImagineCraft Studios</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1F1F1F;
            --background: #FAFAF7;
            --accent: #5B5FEA;
            --glass: rgba(255, 255, 255, 0.1);
            --charcoal: var(--primary);
            --off-white: var(--background);
            --charcoal-light: #2a2a2a;
            --off-white-dark: #e8e8e5;
            --success: #22c55e;
            --error: #ef4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--background);
            color: var(--primary);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background-color: var(--charcoal);
            color: var(--off-white);
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.25rem;
            font-weight: 600;
            letter-spacing: -0.02em;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--off-white);
            font-size: 0.95rem;
            font-weight: 400;
            opacity: 0.8;
            transition: opacity 0.2s ease;
        }

        .nav-links a:hover {
            opacity: 1;
        }

        /* Login Section */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 76px);
            padding: 2rem;
            background-color: var(--charcoal);
        }

        .login-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 3rem;
            width: 100%;
            max-width: 400px;
        }

        .login-card h1 {
            color: var(--off-white);
            font-size: 1.75rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .login-card p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.95rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: var(--off-white);
            opacity: 0.9;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 1rem;
            font-family: 'Inter', system-ui, sans-serif;
            font-size: 1rem;
            color: var(--off-white);
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            outline: none;
            transition: border-color 0.2s ease, background-color 0.2s ease;
        }

        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .form-group input:focus,
        .form-group textarea:focus {
            border-color: rgba(255, 255, 255, 0.4);
            background: rgba(255, 255, 255, 0.08);
        }

        .btn {
            display: inline-block;
            padding: 1rem 2rem;
            background-color: rgba(255, 255, 255, 0.15);
            color: var(--off-white);
            text-decoration: none;
            font-size: 1rem;
            font-weight: 500;
            border-radius: 4px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
            width: 100%;
            text-align: center;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            background-color: rgba(255, 255, 255, 0.25);
        }

        .btn-primary {
            background-color: var(--accent);
            border-color: var(--accent);
        }

        .btn-primary:hover {
            background-color: #4a4ed8;
        }

        .error-message {
            color: var(--error);
            font-size: 0.875rem;
            margin-top: 0.5rem;
            display: none;
        }

        .error-message.visible {
            display: block;
        }

        /* Dashboard Section */
        .dashboard {
            display: none;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .dashboard.visible {
            display: block;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .dashboard-header h1 {
            font-size: 2rem;
            font-weight: 600;
            letter-spacing: -0.02em;
        }

        .dashboard-actions {
            display: flex;
            gap: 1rem;
        }

        .dashboard-actions .btn {
            width: auto;
            padding: 0.75rem 1.5rem;
        }

        .btn-success {
            background-color: var(--success);
            border-color: var(--success);
            color: white;
        }

        .btn-success:hover {
            background-color: #16a34a;
        }

        /* Hero Text Section */
        .hero-section {
            background: white;
            border: 1px solid var(--off-white-dark);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .hero-section h2 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        .hero-section p {
            font-size: 0.9rem;
            color: rgba(31, 31, 31, 0.6);
            margin-bottom: 1rem;
        }

        .hero-section input {
            width: 100%;
            padding: 0.75rem;
            font-family: 'Inter', system-ui, sans-serif;
            font-size: 1rem;
            color: var(--primary);
            background: var(--background);
            border: 1px solid var(--off-white-dark);
            border-radius: 8px;
            outline: none;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .hero-section input:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(91, 95, 234, 0.1);
        }

        /* Navigation Links Section */
        .nav-links-section {
            background: white;
            border: 1px solid var(--off-white-dark);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .nav-links-section h2 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        .nav-links-section p {
            font-size: 0.9rem;
            color: rgba(31, 31, 31, 0.6);
            margin-bottom: 1rem;
        }

        .nav-links-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
        }

        .nav-links-section .form-group {
            margin-bottom: 0;
        }

        .nav-links-section label {
            display: block;
            font-size: 0.8rem;
            font-weight: 500;
            color: rgba(31, 31, 31, 0.6);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .nav-links-section input {
            width: 100%;
            padding: 0.75rem;
            font-family: 'Inter', system-ui, sans-serif;
            font-size: 1rem;
            color: var(--primary);
            background: var(--background);
            border: 1px solid var(--off-white-dark);
            border-radius: 8px;
            outline: none;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .nav-links-section input:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(91, 95, 234, 0.1);
        }

        /* Thought Cards */
        .thoughts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
        }

        .thought-card {
            background: white;
            border: 1px solid var(--off-white-dark);
            border-radius: 16px;
            padding: 1.5rem;
            transition: box-shadow 0.2s ease, transform 0.2s ease;
        }

        .thought-card:hover {
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            transform: translateY(-2px);
        }

        .thought-card .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .thought-card .card-number {
            background: var(--charcoal);
            color: var(--off-white);
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .thought-card label {
            display: block;
            font-size: 0.8rem;
            font-weight: 500;
            color: rgba(31, 31, 31, 0.6);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .thought-card input,
        .thought-card textarea {
            width: 100%;
            padding: 0.75rem;
            font-family: 'Inter', system-ui, sans-serif;
            font-size: 0.95rem;
            color: var(--primary);
            background: var(--background);
            border: 1px solid var(--off-white-dark);
            border-radius: 8px;
            outline: none;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .thought-card input:focus,
        .thought-card textarea:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(91, 95, 234, 0.1);
        }

        .thought-card textarea {
            min-height: 80px;
            resize: vertical;
        }

        .thought-card .form-group {
            margin-bottom: 1rem;
        }

        .thought-card .form-group:last-child {
            margin-bottom: 0;
        }

        /* Action Type Dropdown */
        .thought-card select {
            width: 100%;
            padding: 0.75rem;
            font-family: 'Inter', system-ui, sans-serif;
            font-size: 0.95rem;
            color: var(--primary);
            background: var(--background);
            border: 1px solid var(--off-white-dark);
            border-radius: 8px;
            outline: none;
            cursor: pointer;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%231F1F1F' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            padding-right: 2.5rem;
        }

        .thought-card select:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(91, 95, 234, 0.1);
        }

        /* Conditional Action Fields */
        .action-fields {
            margin-top: 1rem;
            padding: 1rem;
            background: var(--background);
            border-radius: 8px;
            border: 1px dashed var(--off-white-dark);
        }

        .action-fields.hidden {
            display: none;
        }

        .action-fields label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .action-fields input,
        .action-fields textarea {
            margin-top: 0.5rem;
        }

        .action-fields textarea {
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            min-height: 120px;
            line-height: 1.4;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: var(--charcoal);
            color: var(--off-white);
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            transform: translateY(100px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
            z-index: 1000;
        }

        .toast.visible {
            transform: translateY(0);
            opacity: 1;
        }

        .toast.success {
            background: var(--success);
        }

        .toast.error {
            background: var(--error);
        }

        /* Logout button in header */
        .logout-btn {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: var(--off-white);
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.2s ease;
            display: none;
        }

        .logout-btn.visible {
            display: block;
        }

        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Typing Speed Section */
        .typing-speed-section {
            background: white;
            border: 1px solid var(--off-white-dark);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .typing-speed-section h2 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        .typing-speed-section p {
            font-size: 0.9rem;
            color: rgba(31, 31, 31, 0.6);
            margin-bottom: 1rem;
        }

        .slider-container {
            max-width: 400px;
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: rgba(31, 31, 31, 0.6);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .speed-slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: var(--off-white-dark);
            outline: none;
            -webkit-appearance: none;
            appearance: none;
            cursor: pointer;
        }

        .speed-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .speed-slider::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 0 0 4px rgba(91, 95, 234, 0.2);
        }

        .speed-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
            border: none;
        }

        .slider-value {
            margin-top: 0.75rem;
            font-size: 0.9rem;
            color: var(--primary);
        }

        .slider-value span {
            font-weight: 600;
            color: var(--accent);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                padding: 1rem 1.5rem;
                flex-wrap: wrap;
                gap: 1rem;
            }

            .nav-links {
                gap: 1rem;
            }

            .login-card {
                padding: 2rem;
            }

            .dashboard {
                padding: 1.5rem;
            }

            .dashboard-header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .dashboard-header h1 {
                font-size: 1.5rem;
            }

            .thoughts-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="logo">ImagineCraft Studios</div>
        <nav>
            <ul class="nav-links">
                <li><a href="main.html">Main Site</a></li>
                <li><a href="index.html">Explore</a></li>
            </ul>
        </nav>
        <button class="logout-btn" id="logoutBtn" onclick="logout()">Logout</button>
    </header>

    <!-- Login Section -->
    <div class="login-container" id="loginContainer">
        <div class="login-card">
            <h1>Admin Dashboard</h1>
            <p>Enter your password to manage thoughts and responses.</p>
            <form id="loginForm" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Enter admin password" required>
                    <p class="error-message" id="loginError">Incorrect password. Please try again.</p>
                </div>
                <button type="submit" class="btn btn-primary">Sign In</button>
            </form>
        </div>
    </div>

    <!-- Dashboard Section -->
    <div class="dashboard" id="dashboard">
        <div class="dashboard-header">
            <h1>Manage Thoughts & Responses</h1>
            <div class="dashboard-actions">
                <button class="btn btn-success" onclick="saveChanges()">Save Changes</button>
            </div>
        </div>
        <!-- Hero Text Section -->
        <div class="hero-section">
            <h2>Hero Heading</h2>
            <p>This is the main static heading displayed at the top. It does not cycle like the thoughts.</p>
            <input type="text" id="heroText" placeholder="Enter hero heading..." value="WHY ARE YOU HERE?">
        </div>

        <!-- Navigation Links Section -->
        <div class="nav-links-section">
            <h2>Navigation Link Text</h2>
            <p>Customize the text for the navigation links shown after each response.</p>
            <div class="nav-links-grid">
                <div class="form-group">
                    <label>Change Directions Link</label>
                    <input type="text" id="changeDirectionsText" placeholder="Change direction" value="Change direction">
                </div>
                <div class="form-group">
                    <label>Main Site Link</label>
                    <input type="text" id="mainSiteText" placeholder="Enter Main Site" value="Enter Main Site">
                </div>
            </div>
        </div>

        <!-- Typing Speed Section -->
        <div class="typing-speed-section">
            <h2>Typing Animation Speed</h2>
            <p>Adjust the base speed for typing animations. Lower values = faster typing. The animation maintains a natural, stuttered rhythm.</p>
            <div class="slider-container">
                <div class="slider-labels">
                    <span>Fast</span>
                    <span>Slow</span>
                </div>
                <input type="range" id="typingSpeedSlider" min="50" max="300" value="150" class="speed-slider">
                <div class="slider-value">
                    <span id="typingSpeedValue">150</span>ms base delay
                </div>
            </div>
        </div>

        <h2 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 1rem; color: var(--primary);">Cycling Thoughts & Responses</h2>
        <div class="thoughts-grid" id="thoughtsGrid">
            <!-- Cards will be generated by JavaScript -->
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <span id="toastMessage">Changes saved successfully!</span>
    </div>

    <script>
        // Default thoughts and responses (must match index.html)
        const defaultThoughts = [
            "I have ideas.",
            "I don't know where to start.",
            "Our tools don't fit us.",
            "I want software that matches how we work.",
            "Help us think this through.",
            "Who are you?",
            "I need something custom.",
            "Our budget is limited.",
            "We've tried this before.",
            "How long will it take?",
            "Can you work with our team?",
            "What makes you different?"
        ];

        const defaultResponses = [
            "Starting is the hardest part. We will figure out the first step together.",
            "Who we are is less important than what we can build together.",
            "The right tools don't exist yet; we have to invent them.",
            "Complexity is the enemy. We specialize in radical simplicity.",
            "Your vision is the blueprint. Our code is the foundation.",
            "We're builders who believe software should feel inevitable.",
            "Custom is our specialty. Every solution we build is tailored.",
            "Great work doesn't require a fortune. Let's find what's possible.",
            "Past failures are lessons. We learn what didn't work and build better.",
            "Quality takes time, but we move with purpose. Let's set expectations.",
            "Collaboration is core to how we work. Your team becomes ours.",
            "We listen first. Then we build what actually matters to you."
        ];

        // Hardcoded password
        const ADMIN_PASSWORD = 'admin123';

        // Default settings
        const defaultHeroText = 'WHY ARE YOU HERE?';
        const defaultNavLinks = {
            changeDirections: 'Change direction',
            mainSite: 'Enter Main Site'
        };

        // Action types
        const ACTION_TYPES = [
            { value: 'none', label: 'None' },
            { value: 'video', label: 'Video' },
            { value: 'image', label: 'Static Image' },
            { value: 'logo', label: 'Logo' },
            { value: 'matrix', label: 'The Matrix' },
            { value: 'contact', label: 'Contact Us Form' }
        ];

        // Current data
        let currentThoughts = [];
        let currentResponses = [];
        let currentHeroText = defaultHeroText;
        let currentNavLinks = { ...defaultNavLinks };
        let currentActions = [];
        let currentTypingSpeed = 150; // Default typing speed

        // Initialize default actions
        function initDefaultActions() {
            return Array(12).fill(null).map(() => ({
                type: 'none',
                url: '',
                logo: '',
                linkText: 'Click here'
            }));
        }

        // Load data from localStorage
        function loadFromStorage() {
            try {
                const storedThoughts = localStorage.getItem('imaginecraft_thoughts');
                const storedResponses = localStorage.getItem('imaginecraft_responses');
                const storedHeroText = localStorage.getItem('imaginecraft_hero_text');
                const storedNavLinks = localStorage.getItem('imaginecraft_nav_links');
                const storedActions = localStorage.getItem('imaginecraft_actions');
                const storedTypingSpeed = localStorage.getItem('imaginecraft_typing_speed');

                currentThoughts = storedThoughts ? JSON.parse(storedThoughts) : [...defaultThoughts];
                currentResponses = storedResponses ? JSON.parse(storedResponses) : [...defaultResponses];
                currentHeroText = storedHeroText || defaultHeroText;
                currentNavLinks = storedNavLinks ? JSON.parse(storedNavLinks) : { ...defaultNavLinks };
                currentActions = storedActions ? JSON.parse(storedActions) : initDefaultActions();
                currentTypingSpeed = storedTypingSpeed ? parseInt(storedTypingSpeed, 10) : 150;

                // Ensure all 12 actions exist
                while (currentActions.length < 12) {
                    currentActions.push({ type: 'none', url: '', logo: '', linkText: 'Click here' });
                }
            } catch (e) {
                console.warn('Failed to load from localStorage:', e);
                currentThoughts = [...defaultThoughts];
                currentResponses = [...defaultResponses];
                currentHeroText = defaultHeroText;
                currentNavLinks = { ...defaultNavLinks };
                currentActions = initDefaultActions();
                currentTypingSpeed = 150;
            }
        }

        // Save data to localStorage
        function saveToStorage() {
            try {
                localStorage.setItem('imaginecraft_thoughts', JSON.stringify(currentThoughts));
                localStorage.setItem('imaginecraft_responses', JSON.stringify(currentResponses));
                localStorage.setItem('imaginecraft_hero_text', currentHeroText);
                localStorage.setItem('imaginecraft_nav_links', JSON.stringify(currentNavLinks));
                localStorage.setItem('imaginecraft_actions', JSON.stringify(currentActions));
                localStorage.setItem('imaginecraft_typing_speed', currentTypingSpeed.toString());
                return true;
            } catch (e) {
                console.error('Failed to save to localStorage:', e);
                return false;
            }
        }

        // Handle login
        function handleLogin(event) {
            event.preventDefault();
            const password = document.getElementById('password').value;
            const errorEl = document.getElementById('loginError');

            if (password === ADMIN_PASSWORD) {
                errorEl.classList.remove('visible');
                document.getElementById('loginContainer').style.display = 'none';
                document.getElementById('dashboard').classList.add('visible');
                document.getElementById('logoutBtn').classList.add('visible');
                sessionStorage.setItem('admin_authenticated', 'true');
                renderDashboard();
            } else {
                errorEl.classList.add('visible');
            }
        }

        // Logout
        function logout() {
            sessionStorage.removeItem('admin_authenticated');
            document.getElementById('dashboard').classList.remove('visible');
            document.getElementById('logoutBtn').classList.remove('visible');
            document.getElementById('loginContainer').style.display = 'flex';
            document.getElementById('password').value = '';
        }

        // Check if already authenticated
        function checkAuth() {
            if (sessionStorage.getItem('admin_authenticated') === 'true') {
                document.getElementById('loginContainer').style.display = 'none';
                document.getElementById('dashboard').classList.add('visible');
                document.getElementById('logoutBtn').classList.add('visible');
                renderDashboard();
            }
        }

        // Render full dashboard
        function renderDashboard() {
            // Update hero text field
            const heroInput = document.getElementById('heroText');
            if (heroInput) {
                heroInput.value = currentHeroText;
            }

            // Update navigation link fields
            const changeDirectionsInput = document.getElementById('changeDirectionsText');
            const mainSiteInput = document.getElementById('mainSiteText');
            if (changeDirectionsInput) {
                changeDirectionsInput.value = currentNavLinks.changeDirections || defaultNavLinks.changeDirections;
            }
            if (mainSiteInput) {
                mainSiteInput.value = currentNavLinks.mainSite || defaultNavLinks.mainSite;
            }

            // Update typing speed slider
            const typingSpeedSlider = document.getElementById('typingSpeedSlider');
            const typingSpeedValue = document.getElementById('typingSpeedValue');
            if (typingSpeedSlider && typingSpeedValue) {
                typingSpeedSlider.value = currentTypingSpeed;
                typingSpeedValue.textContent = currentTypingSpeed;

                // Add event listener for real-time value update
                typingSpeedSlider.addEventListener('input', function() {
                    typingSpeedValue.textContent = this.value;
                });
            }

            renderThoughtCards();
        }

        // Render thought cards
        function renderThoughtCards() {
            const grid = document.getElementById('thoughtsGrid');
            grid.innerHTML = '';

            for (let i = 0; i < 12; i++) {
                const action = currentActions[i] || { type: 'none', url: '', logo: '', linkText: 'Click here' };
                const card = document.createElement('div');
                card.className = 'thought-card';
                card.innerHTML = `
                    <div class="card-header">
                        <span class="card-number">${i + 1}</span>
                    </div>
                    <div class="form-group">
                        <label>Thought</label>
                        <input type="text" id="thought-${i}" value="${escapeHtml(currentThoughts[i] || '')}" placeholder="Enter thought...">
                    </div>
                    <div class="form-group">
                        <label>Response</label>
                        <textarea id="response-${i}" placeholder="Enter response...">${escapeHtml(currentResponses[i] || '')}</textarea>
                    </div>
                    <div class="form-group">
                        <label>Action Type</label>
                        <select id="action-type-${i}" onchange="handleActionTypeChange(${i})">
                            ${ACTION_TYPES.map(type => `
                                <option value="${type.value}" ${action.type === type.value ? 'selected' : ''}>
                                    ${type.label}
                                </option>
                            `).join('')}
                        </select>
                    </div>
                    <div id="action-fields-${i}" class="action-fields ${action.type === 'none' ? 'hidden' : ''}">
                        ${renderActionFields(i, action)}
                    </div>
                `;
                grid.appendChild(card);
            }
        }

        // Render action-specific fields
        function renderActionFields(index, action) {
            const linkTextField = `
                <div class="form-group">
                    <label>Link Text (shown in terminal)</label>
                    <input type="text" id="action-linktext-${index}" value="${escapeHtml(action.linkText || 'Click here')}" placeholder="Click here">
                </div>
            `;

            switch (action.type) {
                case 'video':
                    return `
                        ${linkTextField}
                        <div class="form-group">
                            <label>YouTube URL</label>
                            <input type="url" id="action-url-${index}" value="${escapeHtml(action.url || '')}" placeholder="https://www.youtube.com/watch?v=...">
                        </div>
                    `;
                case 'image':
                    return `
                        ${linkTextField}
                        <div class="form-group">
                            <label>Image URL</label>
                            <input type="url" id="action-url-${index}" value="${escapeHtml(action.url || '')}" placeholder="https://example.com/image.jpg">
                        </div>
                    `;
                case 'logo':
                    return `
                        ${linkTextField}
                        <div class="form-group">
                            <label>ASCII Logo</label>
                            <textarea id="action-logo-${index}" placeholder="Enter ASCII art...">${escapeHtml(action.logo || '')}</textarea>
                        </div>
                    `;
                case 'matrix':
                    return linkTextField;
                case 'contact':
                    return linkTextField;
                default:
                    return '';
            }
        }

        // Handle action type change
        function handleActionTypeChange(index) {
            const select = document.getElementById(`action-type-${index}`);
            const fieldsContainer = document.getElementById(`action-fields-${index}`);
            const actionType = select.value;

            // Update current action
            if (!currentActions[index]) {
                currentActions[index] = { type: 'none', url: '', logo: '', linkText: 'Click here' };
            }
            currentActions[index].type = actionType;

            // Show/hide fields container
            if (actionType === 'none') {
                fieldsContainer.classList.add('hidden');
                fieldsContainer.innerHTML = '';
            } else {
                fieldsContainer.classList.remove('hidden');
                fieldsContainer.innerHTML = renderActionFields(index, currentActions[index]);
            }
        }

        // Escape HTML to prevent XSS
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Save changes
        function saveChanges() {
            // Save hero text
            const heroInput = document.getElementById('heroText');
            if (heroInput) {
                currentHeroText = heroInput.value || defaultHeroText;
            }

            // Save navigation link text
            const changeDirectionsInput = document.getElementById('changeDirectionsText');
            const mainSiteInput = document.getElementById('mainSiteText');
            if (changeDirectionsInput) {
                currentNavLinks.changeDirections = changeDirectionsInput.value || defaultNavLinks.changeDirections;
            }
            if (mainSiteInput) {
                currentNavLinks.mainSite = mainSiteInput.value || defaultNavLinks.mainSite;
            }

            // Save typing speed
            const typingSpeedSlider = document.getElementById('typingSpeedSlider');
            if (typingSpeedSlider) {
                currentTypingSpeed = parseInt(typingSpeedSlider.value, 10) || 150;
            }

            // Save thoughts, responses, and actions
            for (let i = 0; i < 12; i++) {
                currentThoughts[i] = document.getElementById(`thought-${i}`).value;
                currentResponses[i] = document.getElementById(`response-${i}`).value;

                const actionType = document.getElementById(`action-type-${i}`).value;
                if (!currentActions[i]) {
                    currentActions[i] = { type: 'none', url: '', logo: '', linkText: 'Click here' };
                }
                currentActions[i].type = actionType;

                // Save action-specific fields
                if (actionType !== 'none') {
                    const linkTextInput = document.getElementById(`action-linktext-${i}`);
                    if (linkTextInput) {
                        currentActions[i].linkText = linkTextInput.value || 'Click here';
                    }

                    if (actionType === 'video' || actionType === 'image') {
                        const urlInput = document.getElementById(`action-url-${i}`);
                        if (urlInput) {
                            currentActions[i].url = urlInput.value;
                        }
                    } else if (actionType === 'logo') {
                        const logoInput = document.getElementById(`action-logo-${i}`);
                        if (logoInput) {
                            currentActions[i].logo = logoInput.value;
                        }
                    }
                }
            }

            if (saveToStorage()) {
                showToast('Changes saved successfully!', 'success');
            } else {
                showToast('Failed to save changes.', 'error');
            }
        }

        // Show toast notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');

            toastMessage.textContent = message;
            toast.className = 'toast visible ' + type;

            setTimeout(() => {
                toast.classList.remove('visible');
            }, 3000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadFromStorage();
            checkAuth();
        });
    </script>
</body>
</html>
